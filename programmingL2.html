<!doctype html>

<head>
    <title>Canvas</title>
</head>

<body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>

    <script>
        var canvas, canvasContext;

        window.onload = function() {
            canvas = document.getElementById('gameCanvas');
            canvasContext = canvas.getContext('2d');
            
            document.addEventListener('keydown', keyPressed);
            document.addEventListener('keyup', keyReleased);


            setInterval(mainloop, 1000 / 50);
        }


        var playerXpos = 0;
        var playerYpos = 0;
        var playerSize = 30;
        var playerXspeed = 10;
        var playerYspeed = 10;
        
        var startingPos = true;
        
        const LEFT_KEY = 37;
        const RIGHT_KEY = 39;
        var leftKeyPressed = false;
        var rightKeyPressed = false;


        
        var player = new Image();
        //player.src = 


        
        
        
        
        

        function mainloop() { // refreshes 50 times
            colorRect(0, 0, canvas.width, canvas.height, 'black'); //bg
            colorRect(playerXpos, playerYpos, playerSize, playerSize, 'red'); // player
//            drawImg(player, playerXpos, playerYpos, playerSize, playerSize); // player

            playerMove();

        if (startingPos) {
                startpos();
                startingPos = false;
            }
        
        
        }

        
        
       function startpos() {
           // playerXpos is the centre of the screen
           playerXpos = canvas.width / 2 - playerSize / 2;
           
           playerYpos = canvas.height - playerSize * 2;
       }
        
        
        

         function keyPressed(evt) {
//             console.log(evt.keyCode)
             
            if (evt.keyCode == LEFT_KEY) {
                leftKeyPressed = true;
                console.log('left')
            }

            if (evt.keyCode == RIGHT_KEY) {
                rightKeyPressed = true;

            }

        }
        
         function keyReleased(evt) {
             
            if (evt.keyCode == LEFT_KEY) {
                leftKeyPressed = false;
            }

            if (evt.keyCode == RIGHT_KEY) {
                rightKeyPressed = false;

            }

        }
        
        
        
        function playerMove(){
            
           if (rightKeyPressed && playerXpos < canvas.width - playerSize) {
                playerXpos += playerXspeed; // x move

            }

            if (leftKeyPressed) {
                playerXpos -= playerXspeed; // x move
                if (playerXpos < 0 - playerSize) {
                    playerXpos = canvas.width - playerSize / 2;
                }
            }

        }
            
            
            
         function drawImg(img,x,y,w,h){
            canvasContext.drawImage(img,x,y,w,h);
        }
        
        
        
        function colorRect(x, y, w, h, c) {
            canvasContext.fillStyle = c;
            canvasContext.fillRect(x, y, w, h);
        }
            
            
    </script>
</body>
